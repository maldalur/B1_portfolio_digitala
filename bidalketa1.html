<!DOCTYPE html>
<html lang="eu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1.1 Lehen Bidalketa - B1 Portfolio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“¦ B1.1 Lehen Bidalketa</h1>
            <p>Komunikazioa, Elkarlana eta Netiketa</p>
        </header>
        
        <nav class="main-nav">
            <a href="index.html">ğŸ“‹ Sarrera</a>
            <a href="bidalketa1.html" class="active">ğŸ“¦ B1.1 Lehen Bidalketa</a>
            <a href="bidalketa2.html">ğŸ“¦ B1.2 Bigarren Bidalketa</a>
            <a href="bidalketa3.html">ğŸ“¦ B1.3 Hirugarren Bidalketa</a>
        </nav>
        
        <!-- IRAKURKETA MODUA / MODO LECTURA POR VOZ -->
        <div id="audioReaderPanel" style="position: fixed; bottom: 20px; left: 20px; z-index: 1000; background: white; border-radius: 15px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: none;">
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #667eea;">ğŸŒ Hizkuntza / Idioma:</label>
                <select id="languageSelect" onchange="changeLanguage()" style="width: 100%; padding: 8px; border: 2px solid #667eea; border-radius: 8px; font-size: 14px; cursor: pointer;">
                    <option value="es-ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    <option value="eu-ES">ğŸ‡ªğŸ‡º Euskara</option>
                    <option value="en-US">ğŸ‡¬ğŸ‡§ English</option>
                    <option value="fr-FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="playPauseBtn" onclick="togglePlayPause()" 
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                               color: white; 
                               border: none; 
                               border-radius: 10px; 
                               padding: 10px 20px; 
                               font-size: 20px; 
                               cursor: pointer; 
                               box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                               transition: all 0.3s ease;">
                    â–¶ï¸ Play
                </button>
                <button onclick="closeAudioPanel()" 
                        style="background: #dc3545; 
                               color: white; 
                               border: none; 
                               border-radius: 10px; 
                               padding: 10px 20px; 
                               font-size: 14px; 
                               cursor: pointer; 
                               box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                               transition: all 0.3s ease;">
                    âŒ Itxi
                </button>
            </div>
        </div>
        
        <!-- BotÃ³n flotante para abrir el panel -->
        <div style="position: fixed; bottom: 20px; left: 20px; z-index: 999;">
            <button id="audioReaderBtn" onclick="openAudioPanel()" 
                    style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                           color: white; 
                           border: none; 
                           border-radius: 50%; 
                           width: 60px; 
                           height: 60px; 
                           font-size: 24px; 
                           cursor: pointer; 
                           box-shadow: 0 4px 10px rgba(0,0,0,0.3);
                           transition: all 0.3s ease;">
                ğŸ”Š
            </button>
        </div>
        
        <div class="content">
            <!-- SARRERA -->
            <section>
                <h2>ğŸ“‹ Sarrera</h2>
                <div class="task-card">
                    <p style="font-size: 1.1em;">
                        Lehen bidalketa honetan <strong>3 ataza</strong> aurkezten ditut irakasle taldearen komunikazio eta elkarlana digitalei buruz:
                    </p>
                    <ul style="margin-top: 20px; margin-left: 20px; font-size: 1.05em; line-height: 1.8;">
                        <li>ğŸ’¬ <strong>1.A Ataza:</strong> Irakasle taldearen komunikaziorako testuingurua</li>
                        <li>ğŸ¤ <strong>1.B Ataza:</strong> Irakasle taldearen elkarlanerako testuingurua</li>
                        <li>ğŸ“œ <strong>1.C Ataza:</strong> Netiketa arauak</li>
                    </ul>
                </div>
                
                <div class="task-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3 style="color: white;">ğŸ¥ Azalpen Bideoa</h3>
                    <p style="margin-bottom: 20px;">Hemen ikusgai dago portfolio honen azalpena bideoan:</p>
                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 800px; margin: 0 auto;">
                        <iframe 
                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);"
                            src="https://www.youtube.com/embed/udDRDfqSZZE?cc_load_policy=1&hl=eu" 
                            title="Portfolio Digital B1 - Lehen Bidalketa" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    
                    <!-- Nota de Accesibilidad -->
                    <div style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.2); border-left: 4px solid white; border-radius: 4px;">
                        <p style="margin: 0; color: white; font-size: 0.95em;">
                            â™¿ <strong>Irisgarritasuna:</strong> Bideoak azpitituluak ditu. Azpitituluak aktibatzeko, sakatu â–¶ï¸ eta ondoren 'CC' botoia.
                        </p>
                    </div>
                </div>
            </section>

            <!-- 1.A ATAZA: KOMUNIKAZIOA -->
            <section id="komunikazioa">
                <h2>ğŸ’¬ 1.A Ataza: Komunikaziorako Testuingurua</h2>
                
                <div class="task-card">
                    <h3>ğŸ¯ Helburua</h3>
                    <p>Gure irakasle taldean komunikatzeko erabiltzen ditugun kanal eta tresna digitalak erakustea.</p>
                </div>
                
                <div class="task-card">
                    <h3>ğŸ“± Erabiltzen ditugun Komunikazio Tresnak</h3>
                    
                    <div class="tool-grid">
                        <div class="tool-item">
                            <h4>ğŸ“§ Email (Gmail)</h4>
                            <span class="badge">Ofiziala</span>
                            <p>Komunikazio formal eta ofiziala egiteko. Bilera deiak, txostenak, informazio garrantzitsua.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ’¬ Google Chat Taldea</h4>
                            <span class="badge">Informala</span>
                            <p>Eguneroko komunikazio azkarra. Galdera laburrak eta abisu azkarrak kanal antolatuetan.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ¥ Google Meet</h4>
                            <span class="badge">Ofiziala</span>
                            <span class="badge">Bideokonferentziak</span>
                            <p>Bilerak online egiteko. Pantaila partekatzea, txata eta fitxategiak partekatzea.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ“¢ Moodle Foroa</h4>
                            <span class="badge">Akademikoa</span>
                            <p>Ikasle eta irakasleen arteko komunikazioa. Galderak eta erantzunak.</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: #e8f4f8; border-radius: 10px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">ğŸ’¡ Argudioa</h4>
                        <p style="font-size: 1.05em; line-height: 1.8;"><strong>Tresna hauek komunikazioa bermatzeko balio dute</strong> hainbat motatako komunikazio beharretarako: formala (Gmail, Google Meet), informala (Google Chat), eta akademikoa (Moodle). Horrela, informazioa azkar eta eraginkortasunez heltzen da irakasle talde osora.</p>
                    </div>
                </div>
                
                <div class="task-card" style="background: #e8f5e9;">
                    <h3 style="color: #2e7d32;">âœ… Lorpen Adierazlea</h3>
                    <p style="font-size: 1.05em;">
                        <strong>"Martxan jarritako tresna digitalek irakasle taldean komunikazioa bermatzeko balio dutela argudiatzen da"</strong>
                    </p>
                    <p style="margin-top: 10px;">âœ“ <strong>Betetzen da:</strong> Tresna desberdinak identifikatu dira eta haien erabilera argudiatzen da.</p>
                </div>
            </section>

            <!-- 1.B ATAZA: ELKARLANA -->
            <section id="elkarlana">
                <h2>ğŸ¤ 1.B Ataza: Elkarlanerako Testuingurua</h2>
                
                <div class="task-card">
                    <h3>ğŸ¯ Helburua</h3>
                    <p>Gure irakasle taldean elkarlanean lan egiteko erabiltzen ditugun kanal eta tresna digitalak erakustea.</p>
                </div>
                
                <div class="task-card">
                    <h3>ğŸ”§ Erabiltzen ditugun Elkarlana Tresnak</h3>
                    
                    <div class="tool-grid">
                        <div class="tool-item">
                            <h4>â˜ï¸ Google Drive</h4>
                            <span class="badge">Dokumentuak</span>
                            <span class="badge">Denbera errealean</span>
                            <p>Dokumentuak, kalkulu-orriak eta aurkezpenak partekatzeko eta batera editatzeko. Bertsio-kontrola denbera errealean.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ“Š Google Drive (Unitate partekatuak)</h4>
                            <span class="badge">Fitxategiak</span>
                            <p>Fitxategi handiak partekatzeko eta karpeta egituratu batean antolatzeko. Sarbide kontrol zehatza eta taldeko kudeaketa.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ“ Padlet</h4>
                            <span class="badge">Ideiak</span>
                            <span class="badge">Adibururruak</span>
                            <p>Ideia-adibururruetarako. Informazio bisual eta interaktiboa partekatzeko.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ“… Google Calendar</h4>
                            <span class="badge">Antolaketa</span>
                            <p>Bilera eta gertakari partekatuak antolatzeko. Gogorarazpenak eta abisu automatikoak.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ¯ Trello</h4>
                            <span class="badge">Proiektuak</span>
                            <p>Proiektuen kudeaketa. Zereginen banaketa eta jarraipena egiteko.</p>
                        </div>
                        
                        <div class="tool-item">
                            <h4>ğŸ“š Moodle</h4>
                            <span class="badge">Edukiak</span>
                            <p>Irakasgaien edukiak eta materialak partekatzeko. Zereginak eta azterketen kudeaketa.</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: #f0f8e8; border-radius: 10px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">ğŸ’¡ Argudioa</h4>
                        <p style="font-size: 1.05em; line-height: 1.8;"><strong>Tresna hauek informazioa, edukiak partekatzeko eta elkarlanean elkar eragiteko balio dute.</strong> Horrela, irakasle taldea modu koordinatuan lan egin dezake, dokumentuak batera editatu, erantzukizunak banatu, eta proiektuen jarraipena egin denbera errealean. Elkarlana errazten dute eta eraginkortasuna hobetzen dute.</p>
                    </div>
                </div>
                
                <div class="task-card" style="background: #e8f5e9;">
                    <h3 style="color: #2e7d32;">âœ… Lorpen Adierazlea</h3>
                    <p style="font-size: 1.05em;">
                        <strong>"Martxan jarritako tresna digitalek irakasle taldean informazioa, edukiak partekatzeko eta elkarlanean elkar eragiteko balio dutela argudiatzen da"</strong>
                    </p>
                    <p style="margin-top: 10px;">âœ“ <strong>Betetzen da:</strong> Tresna desberdinak identifikatu dira eta elkarlana nola errazten duten argudiatzen da.</p>
                </div>
            </section>

            <!-- 1.C ATAZA: NETIKETA -->
            <section id="netiketa">
                <h2>ğŸ“œ 1.C Ataza: Netiketa Arauak</h2>
                
                <div class="task-card">
                    <h3>ğŸ¯ Helburua</h3>
                    <p>Gure irakasle taldearen lan testuingururako Netiketa arauak ezartzea eta infografia batean islatzea.</p>
                </div>
                
                <div class="infographic">
                    <h3>ğŸ¯ GURE NETIKETA ARAUAK</h3>
                    <p style="color: #666; margin-bottom: 30px;">Komunikazio digitalean errespetuz aritzeko gidalerroak</p>
                    
                    <div class="netiquette-rules">
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">1</span>
                                <span>Errespetua</span>
                            </h4>
                            <p>Beti errespetuz eta adeitasunez tratatu kideak. Saihestu iraingarriak edo erasotzaileak diren mezuak.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">2</span>
                                <span>Argitasuna</span>
                            </h4>
                            <p>Idatzi modu argi eta zuzenean. Erabili letra larriak ulergarritasuna hobetzeko, ez oihukateko.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">3</span>
                                <span>Pribatutasuna</span>
                            </h4>
                            <p>Errespetatu besteen pribatutasuna. Ez partekatu informazio pertsonala edo sentikorra baimenik gabe.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">4</span>
                                <span>Erantzun Azkarra</span>
                            </h4>
                            <p>Erantzun mezuei denbora arrazoigarri batean (24-48 ordu). Bideratze automatikoa aktibatu oporretan.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">5</span>
                                <span>Euskara Egokia</span>
                            </h4>
                            <p>Erabili hizkuntza egokia eta profesionala. Saihestu laburdura gehiegi eta emotikonoak komunikazio formalean.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">6</span>
                                <span>Konfidentzialtasuna</span>
                            </h4>
                            <p>Mantendu taldeko kontuak konfidentzialak. Ez partekatu kanpoaldean gure barne eztabaidak.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">7</span>
                                <span>Ordu Egokiak</span>
                            </h4>
                            <p>Lanorduak errespetatu. Saihestu mezuak ordutegi formaletik kanpo salbu eta premiazkoak direnean.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">8</span>
                                <span>Erantzukizuna</span>
                            </h4>
                            <p>Hartu erantzukizuna gure hitz eta ekintzengatik. Onartu akatsak eta ikasi horietatik.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">9</span>
                                <span>Inklusioa</span>
                            </h4>
                            <p>Sustatu inklusioa eta aniztasuna. Erabili hizkuntza inklusiboa eta errespetatu kultura desberdinak.</p>
                        </div>
                        
                        <div class="rule-card">
                            <h4>
                                <span class="rule-number">10</span>
                                <span>Irudi Profesionala</span>
                            </h4>
                            <p>Mantendu irudi profesional bat komunikazio digitalean. Gure ikastetxea ordezkatzen dugu.</p>
                        </div>
                    </div>
                </div>
                
                <div class="task-card" style="margin-top: 30px;">
                    <div style="padding: 20px; background: #fff3e0; border-radius: 10px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">ğŸ’¡ Argudioa</h4>
                        <p style="font-size: 1.05em; line-height: 1.8;"><strong>Netiketa arau hauek komunikazio kanaletan errespetuz aritzeko balio dute.</strong> Gidalerroak ezarriz, lankidetza positibo eta errespetuzko bat sustatzen dugu, komunikazioak profesionalki kudeatzeko bidea errazten dugularik eta taldeko kide guztien arteko errespetua bermatuz. Horrek ingurunea hobea sortzen du lan-taldeko guztientzat.</p>
                    </div>
                </div>
                
                <div class="task-card" style="background: #e8f5e9;">
                    <h3 style="color: #2e7d32;">âœ… Lorpen Adierazlea</h3>
                    <p style="font-size: 1.05em;">
                        <strong>"Landutako netiketa arauek komunikazio kanaletan errespetuz aritzeko balio dute"</strong>
                    </p>
                    <p style="margin-top: 10px;">âœ“ <strong>Betetzen da:</strong> 10 netiketa arau ezarri dira eta horien garrantzia argudiatzen da.</p>
                </div>
            </section>

            <!-- ONDORIOAK -->
            <section>
                <h2>âœ… Ondorioak</h2>
                <div class="task-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3 style="color: white;">ğŸ“ Lehen Bidalketa Osatuta</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        Bidalketa honetan 3 atazen lorpen adierazle guztiak bete dira:
                    </p>
                    <ul style="margin-top: 15px; margin-left: 20px; font-size: 1.05em; line-height: 1.8;">
                        <li>âœ… Komunikaziorako tresna digitalak identifikatu eta argudiatuak</li>
                        <li>âœ… Elkarlanerako tresna digitalak identifikatu eta argudiatuak</li>
                        <li>âœ… 10 netiketa arau ezarri eta argudiatuak</li>
                    </ul>
                </div>
            </section>
        </div>
        
        <footer>
            <p><strong>Mikel Aldalur</strong> | B1 Gaitasun Digitala - 2025/2026</p>
            <p style="margin-top: 10px;">
                <a href="sarrera.html" style="color: #64b5f6;">â† Itzuli Sarrerara</a> | 
                <a href="bidalketa2.html" style="color: #64b5f6;">Hurrengoa: B1.2 Bigarren Bidalketa â†’</a>
            </p>
        </footer>
    </div>

    <!-- BotÃ³n de Accesibilidad -->
    <button class="accessibility-button" id="accessibilityBtn" aria-label="Irisgarritasun aukerak">
        â™¿
    </button>

    <!-- MenÃº de Accesibilidad -->
    <div class="accessibility-menu" id="accessibilityMenu">
        <h3>â™¿ Irisgarritasuna</h3>
        
        <div class="accessibility-option">
            <label for="readingMode">ğŸ“– Irakurketa modua</label>
            <input type="checkbox" id="readingMode">
        </div>
        
        <div class="accessibility-option">
            <label for="highContrast">ğŸ¨ Kontraste altua</label>
            <input type="checkbox" id="highContrast">
        </div>
        
        <div class="accessibility-option">
            <label for="largeText">ğŸ”¤ Testu handia</label>
            <input type="checkbox" id="largeText">
        </div>
        
        <div class="accessibility-option">
            <label for="wideSpacing">ğŸ“ Tarteak zabaldu</label>
            <input type="checkbox" id="wideSpacing">
        </div>
    </div>

    <script>
        // Control del menÃº de accesibilidad
        const accessibilityBtn = document.getElementById('accessibilityBtn');
        const accessibilityMenu = document.getElementById('accessibilityMenu');

        accessibilityBtn.addEventListener('click', () => {
            accessibilityMenu.classList.toggle('active');
        });

        // Cerrar el menÃº si se hace clic fuera
        document.addEventListener('click', (e) => {
            if (!accessibilityBtn.contains(e.target) && !accessibilityMenu.contains(e.target)) {
                accessibilityMenu.classList.remove('active');
            }
        });

        // Modo de lectura
        document.getElementById('readingMode').addEventListener('change', function() {
            document.body.classList.toggle('reading-mode', this.checked);
            localStorage.setItem('readingMode', this.checked);
        });

        // Alto contraste
        document.getElementById('highContrast').addEventListener('change', function() {
            document.body.classList.toggle('high-contrast', this.checked);
            localStorage.setItem('highContrast', this.checked);
        });

        // Texto grande
        document.getElementById('largeText').addEventListener('change', function() {
            document.body.classList.toggle('large-text', this.checked);
            localStorage.setItem('largeText', this.checked);
        });

        // Espaciado amplio
        document.getElementById('wideSpacing').addEventListener('change', function() {
            document.body.classList.toggle('wide-spacing', this.checked);
            localStorage.setItem('wideSpacing', this.checked);
        });

        // Restaurar preferencias guardadas
        window.addEventListener('load', () => {
            if (localStorage.getItem('readingMode') === 'true') {
                document.getElementById('readingMode').checked = true;
                document.body.classList.add('reading-mode');
            }
            if (localStorage.getItem('highContrast') === 'true') {
                document.getElementById('highContrast').checked = true;
                document.body.classList.add('high-contrast');
            }
            if (localStorage.getItem('largeText') === 'true') {
                document.getElementById('largeText').checked = true;
                document.body.classList.add('large-text');
            }
            if (localStorage.getItem('wideSpacing') === 'true') {
                document.getElementById('wideSpacing').checked = true;
                document.body.classList.add('wide-spacing');
            }
        });
    </script>
    
    <!-- AUDIO READER SCRIPT / IRAKURKETA AUDIO SCRIPT -->
    <script>
        let isReading = false;
        let isPaused = false;
        let utterance = null;
        let currentIndex = 0;
        let contentElements = [];
        let availableVoices = [];
        let selectedLanguage = 'es-ES';
        
        function loadVoices() {
            availableVoices = window.speechSynthesis.getVoices();
            console.log('Voces disponibles:', availableVoices.map(v => v.lang + ' - ' + v.name));
            updateLanguageOptions();
        }
        
        function updateLanguageOptions() {
            const select = document.getElementById('languageSelect');
            const hasBasque = availableVoices.some(v => v.lang.startsWith('eu'));
            
            Array.from(select.options).forEach(option => {
                const lang = option.value.substring(0, 2);
                if (lang === 'eu' && !hasBasque) {
                    option.disabled = true;
                    option.text += ' (Ez dago erabilgarri)';
                }
            });
        }
        
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        loadVoices();
        
        function openAudioPanel() {
            document.getElementById('audioReaderPanel').style.display = 'block';
            document.getElementById('audioReaderBtn').style.display = 'none';
        }
        
        function closeAudioPanel() {
            stopAudioReader();
            document.getElementById('audioReaderPanel').style.display = 'none';
            document.getElementById('audioReaderBtn').style.display = 'block';
        }
        
        function changeLanguage() {
            selectedLanguage = document.getElementById('languageSelect').value;
            console.log('Idioma seleccionado:', selectedLanguage);
            
            if (isReading) {
                stopAudioReader();
                setTimeout(startAudioReader, 100);
            }
        }
        
        function togglePlayPause() {
            const btn = document.getElementById('playPauseBtn');
            
            if (!isReading) {
                startAudioReader();
                btn.textContent = 'â¸ï¸ Pause';
                btn.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                isReading = true;
                isPaused = false;
            } else if (isPaused) {
                window.speechSynthesis.resume();
                btn.textContent = 'â¸ï¸ Pause';
                isPaused = false;
            } else {
                window.speechSynthesis.pause();
                btn.textContent = 'â–¶ï¸ Play';
                isPaused = true;
            }
        }
        
        function startAudioReader() {
            if (availableVoices.length === 0) {
                loadVoices();
            }
            
            const content = document.querySelector('.content');
            contentElements = Array.from(content.querySelectorAll('h2, h3, h4, p, li'))
                .filter(el => {
                    const text = el.textContent.trim();
                    return text.length > 0 && !el.querySelector('img') && !el.classList.contains('badge');
                });
            
            currentIndex = 0;
            readNextElement();
        }
        
        function readNextElement() {
            if (currentIndex >= contentElements.length || !isReading) {
                stopAudioReader();
                return;
            }
            
            const element = contentElements[currentIndex];
            const text = element.textContent.trim();
            
            element.style.backgroundColor = '#fff3cd';
            element.style.transition = 'background-color 0.3s';
            
            utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = selectedLanguage;
            utterance.rate = 0.85;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            const voice = availableVoices.find(v => v.lang === selectedLanguage) || 
                         availableVoices.find(v => v.lang.startsWith(selectedLanguage.substring(0, 2))) ||
                         availableVoices[0];
            if (voice) {
                utterance.voice = voice;
            }
            
            utterance.onend = function() {
                element.style.backgroundColor = '';
                currentIndex++;
                setTimeout(readNextElement, 100);
            };
            
            utterance.onerror = function(event) {
                console.error('Speech synthesis error:', event);
                element.style.backgroundColor = '';
                currentIndex++;
                readNextElement();
            };
            
            window.speechSynthesis.speak(utterance);
        }
        
        function stopAudioReader() {
            window.speechSynthesis.cancel();
            isReading = false;
            isPaused = false;
            currentIndex = 0;
            
            contentElements.forEach(el => {
                if (el && el.style) {
                    el.style.backgroundColor = '';
                }
            });
            
            const btn = document.getElementById('playPauseBtn');
            if (btn) {
                btn.textContent = 'â–¶ï¸ Play';
                btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            }
        }
        
        window.addEventListener('beforeunload', function() {
            stopAudioReader();
        });
    </script>
</body>
</html>
